<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <title>ISI - CRUD</title>

</head>

<body>
  <header>
    <div class="header-box-title">
      <img src="public/Please.png" alt="upe-logo" style="height: 16rem;width: 16rem; padding-top: 0.6rem;">
    </div>
  </header>

  <main>
    <form id="create-form">
      <div class="sessao-conteudo">
        <label for="name">Nome:</label>
        <input type="text" id="nome" name="name">
        <label for="name">Idade:</label>
        <input type="text" id="idade" name="idade">
        <label for="especialidade">Especialidade:</label>
        <input type="text" id="especialidade" name="especialidade">
        <button type="submit">Criar</button>
      </div>

    </form>
  </main>

  <div class="container">
    <h2>Itens existentes:</h2>
    <ul id="item-list"></ul>

  </div>

  <footer>
    <div>
      <div class="row">
        <div class="col-md-6">
          <p>&copy; 2023 Seu Nome</p>
        </div>
        <div class="col-md-6">
          <ul class="social-media">
            <a href="#" class="instagram" target="_blank"><i class="fa fa-instagram"></i></a>
            <a href="www.linkedin.com/in/gabriel-ferreira-masson" class="linkedin"><i class="fa fa-linkedin"></i></a>
          </ul>
        </div>
      </div>
    </div>
  </footer>
  <script>
    const form = document.getElementById('create-form');
    const itemList = document.getElementById('item-list');

    // Função para salvar os itens na Local Storage
    function saveItems(items) {
      localStorage.setItem('items', JSON.stringify(items));
    }

    // Função para carregar os itens da Local Storage
    function loadItems() {
      const items = JSON.parse(localStorage.getItem('items'));
      if (items) {
        return items;
      } else {
        return [];
      }
    }

    // Função para exibir os itens na tela
    function renderItems(items) {
      itemList.innerHTML = '';
      for (let i = 0; i < items.length; i++) {
        const item = items[i];
        const li = document.createElement('li');
        li.innerHTML = `<strong>${item.nome} - ${item.idade} anos</strong> Especialista em ${item.especialidade}`;
        const deleteButton = document.createElement('button');
        deleteButton.className = "btn-remove"
        deleteButton.innerText = 'Excluir';
        deleteButton.addEventListener('click', () => {
          items.splice(i, 1);
          saveItems(items);
          renderItems(items);
        });
        li.appendChild(deleteButton);
        itemList.appendChild(li);
      }
    }

    // Carrega os itens da Local Storage ao carregar a página
    const items = loadItems();
    renderItems(items);

    // Adiciona um novo item
    form.addEventListener('submit', async(event) => {
      event.preventDefault();
      const nome = document.querySelector('#nome').value;
      console.log(nome)
      const especialidade = document.querySelector('#especialidade').value;
      const idade = document.querySelector('#idade').value;
      const newItem = {
        nome,
        especialidade,
        idade
      };
      items.push(newItem);
      saveItems(items);
      renderItems(items);
      form.reset();
    });
  </script>
</body>

</html>